{
    "id": "db8674145db611f09e300242ac120007",
    "title": "test",
    "dsl": {
        "answer": [],
        "components": {
            "begin": {
                "obj": {
                    "component_name": "Begin",
                    "params": {
                        "prologue": "你好！ 我是你的助理，有什么可以帮到你的吗？",
                        "query": [
                            {
                                "key": "instruction",
                                "name": "instruction",
                                "optional": true,
                                "type": "line"
                            },
                            {
                                "key": "topic",
                                "name": "topic",
                                "optional": false,
                                "type": "line",
                                "value": "机器学习综述"
                            },
                            {
                                "type": "file",
                                "key": "template",
                                "name": "template",
                                "optional": false
                            }
                        ]
                    }
                },
                "downstream": [
                    "Generate:BusyReadersWait"
                ],
                "upstream": []
            },
            "Generate:BusyReadersWait": {
                "obj": {
                    "component_name": "Generate",
                    "params": {
                        "cite": true,
                        "frequency_penalty": 0.7,
                        "llm_id": "qwen2.5:7b@Ollama",
                        "message_history_window_size": 12,
                        "parameters": [],
                        "presence_penalty": 0.4,
                        "prompt": "## 背景：给你一个报告，你需要从这个报告中提炼出它的大纲。\n\n## 目标：从报告中提取出大纲的模板，大纲应尽可能通用，不面向某一主题，不能涉及到数字、地名、人名、组织名和时间等特定信息。\n\n## 约束：提纲的各个子标题之间使用换行符分割。直接回答文章提纲，不要说多余的话，不要告诉用户你使用了参考材料，也不可以将参考材料的内容输出给用户！！！\n\n## 输出样例：\n一、子章节1标题\n二、子章节2标题\n三、子章节3标题\n四、子章节4标题\n五、子章节5标题\n六、子章节6标题\n\n## 要被提炼的报告：\n{begin@template}\n\n## 你提炼的大纲：",
                        "temperature": 0.1,
                        "top_p": 0.3
                    }
                },
                "downstream": [
                    "Generate:TastyYearsEnjoy"
                ],
                "upstream": [
                    "begin"
                ]
            },
            "Generate:TastyYearsEnjoy": {
                "obj": {
                    "component_name": "Generate",
                    "params": {
                        "cite": true,
                        "frequency_penalty": 0.7,
                        "llm_id": "qwen2.5:7b@Ollama",
                        "message_history_window_size": 12,
                        "parameters": [],
                        "presence_penalty": 0.4,
                        "prompt": "## 背景：你需要为一篇报告生成一个大纲，我会给你报告的题目和参考的大纲。\n\n## 目标：为指定标题的报告生成一个大纲，大纲可以照着参考大纲仿写\n\n## 约束：大纲的各个子标题之间使用换行符分割。直接回答文章大纲，不要说多余的话，不要告诉用户你使用了参考材料，也不可以将参考材料的内容输出给用户！！！\n\n## 输出样例：\n一、子章节1标题\n二、子章节2标题\n三、子章节3标题\n四、子章节4标题\n五、子章节5标题\n六、子章节6标题\n\n## 报告题目：\n{begin@topic}\n\n## 用户的其他指示：\n\n{begin@instruction}\n\n## 参考大纲：\n{Generate:BusyReadersWait}\n\n## 你提炼的大纲：",
                        "temperature": 0.1,
                        "top_p": 0.3
                    }
                },
                "downstream": [
                    "Iteration:AngryWormsRefuse"
                ],
                "upstream": [
                    "Generate:BusyReadersWait"
                ]
            },
            "Iteration:AngryWormsRefuse": {
                "obj": {
                    "component_name": "Iteration",
                    "params": {
                        "delimiter": "\n",
                        "query": [
                            {
                                "component_id": "Generate:TastyYearsEnjoy",
                                "type": "reference"
                            }
                        ]
                    }
                },
                "downstream": [
                    "Template:FairBadgersTalk"
                ],
                "upstream": [
                    "Generate:TastyYearsEnjoy"
                ]
            },
            "IterationItem:BitterPapersChew": {
                "obj": {
                    "component_name": "IterationItem",
                    "params": {}
                },
                "downstream": [
                    "Retrieval:FunnyClubsCreate"
                ],
                "upstream": [],
                "parent_id": "Iteration:AngryWormsRefuse"
            },
            "Generate:FlatHeadsRelax": {
                "obj": {
                    "component_name": "Generate",
                    "params": {
                        "cite": true,
                        "frequency_penalty": 0.7,
                        "llm_id": "qwen2.5:7b@Ollama",
                        "message_history_window_size": 12,
                        "parameters": [],
                        "presence_penalty": 0.4,
                        "prompt": "## 背景：你需要根据给定的大纲某个章节撰写对应的报告。在撰写章节时，内容需要符合参考资料。\n\n## 目标：你需要创建一个详细的章节，在主题上需要遵循章节标题，在内容上需要严格贴合参考资料，章节内容中不要包含章节标题。\n\n## 约束：保持内容的准确性和相关性，避免偏离主题。仅回答扩写后的内容，不要说多余的话（这点十分重要！！！）。\n\n## 输出格式：只需要撰写的完整的章节文本，不需要再输出章节标题。\n\n## 注意事项：除了参考资料部分提到的数字、地点、人物、联系方式等具体信息，报告中不能涉及其他数字、地点、人物、联系方式等具体信息。\n\n## 用户的指示：\n{begin@instruction}\n\n \n## 文章标题：\n{begin@topic}\n\n## 章节标题：\n{IterationItem:BitterPapersChew}\n\n## 参考资料：\n{Retrieval:FunnyClubsCreate}\n\n## 扩写的章节内容：",
                        "temperature": 0.1,
                        "top_p": 0.3
                    }
                },
                "downstream": [
                    "Template:RichSignsCheat"
                ],
                "upstream": [
                    "Retrieval:FunnyClubsCreate"
                ],
                "parent_id": "Iteration:AngryWormsRefuse"
            },
            "Retrieval:FunnyClubsCreate": {
                "obj": {
                    "component_name": "Retrieval",
                    "params": {
                        "empty_response": "无",
                        "kb_ids": [],
                        "keywords_similarity_weight": 0.3,
                        "query": [
                            {
                                "component_id": "IterationItem:BitterPapersChew",
                                "type": "reference"
                            }
                        ],
                        "similarity_threshold": 0.2,
                        "top_n": 8,
                        "use_kg": true
                    }
                },
                "downstream": [
                    "Generate:FlatHeadsRelax"
                ],
                "upstream": [
                    "IterationItem:BitterPapersChew"
                ],
                "parent_id": "Iteration:AngryWormsRefuse"
            },
            "Template:RichSignsCheat": {
                "obj": {
                    "component_name": "Template",
                    "params": {
                        "content": "<h2> {IterationItem:BitterPapersChew}</h2>\n<div> {Generate:FlatHeadsRelax}</div>",
                        "parameters": []
                    }
                },
                "downstream": [],
                "upstream": [
                    "Generate:FlatHeadsRelax"
                ],
                "parent_id": "Iteration:AngryWormsRefuse"
            },
            "Template:FairBadgersTalk": {
                "obj": {
                    "component_name": "Template",
                    "params": {
                        "content": "<h1> {begin@topic}</h1>\n\n\n{Iteration:AngryWormsRefuse}",
                        "parameters": []
                    }
                },
                "downstream": [
                    "Answer:LuckyBeersPoke"
                ],
                "upstream": [
                    "Iteration:AngryWormsRefuse"
                ]
            },
            "Answer:LuckyBeersPoke": {
                "obj": {
                    "component_name": "Answer",
                    "params": {}
                },
                "downstream": [],
                "upstream": [
                    "Template:FairBadgersTalk"
                ]
            }
        },
        "graph": {
            "nodes": [
                {
                    "data": {
                        "form": {
                            "prologue": "你好！ 我是你的助理，有什么可以帮到你的吗？",
                            "query": [
                                {
                                    "key": "instruction",
                                    "name": "instruction",
                                    "optional": true,
                                    "type": "line"
                                },
                                {
                                    "key": "topic",
                                    "name": "topic",
                                    "optional": false,
                                    "type": "line",
                                    "value": "机器学习综述"
                                },
                                {
                                    "type": "file",
                                    "key": "template",
                                    "name": "template",
                                    "optional": false
                                }
                            ]
                        },
                        "label": "Begin",
                        "name": "begin"
                    },
                    "dragging": false,
                    "id": "begin",
                    "measured": {
                        "height": 173,
                        "width": 200
                    },
                    "position": {
                        "x": 54.80940963819564,
                        "y": 523.9393717583736
                    },
                    "selected": true,
                    "sourcePosition": "left",
                    "targetPosition": "right",
                    "type": "beginNode"
                },
                {
                    "data": {
                        "form": {
                            "cite": true,
                            "frequencyPenaltyEnabled": true,
                            "frequency_penalty": 0.7,
                            "llm_id": "qwen2.5:7b@Ollama",
                            "maxTokensEnabled": false,
                            "max_tokens": 256,
                            "message_history_window_size": 12,
                            "parameters": [],
                            "presencePenaltyEnabled": true,
                            "presence_penalty": 0.4,
                            "prompt": "## 背景：给你一个报告，你需要从这个报告中提炼出它的大纲。\n\n## 目标：从报告中提取出大纲的模板，大纲应尽可能通用，不面向某一主题，不能涉及到数字、地名、人名、组织名和时间等特定信息。\n\n## 约束：提纲的各个子标题之间使用换行符分割。直接回答文章提纲，不要说多余的话，不要告诉用户你使用了参考材料，也不可以将参考材料的内容输出给用户！！！\n\n## 输出样例：\n一、子章节1标题\n二、子章节2标题\n三、子章节3标题\n四、子章节4标题\n五、子章节5标题\n六、子章节6标题\n\n## 要被提炼的报告：\n{begin@template}\n\n## 你提炼的大纲：",
                            "temperature": 0.1,
                            "temperatureEnabled": true,
                            "topPEnabled": true,
                            "top_p": 0.3
                        },
                        "label": "Generate",
                        "name": "模板大纲提取"
                    },
                    "dragging": false,
                    "id": "Generate:BusyReadersWait",
                    "measured": {
                        "height": 108,
                        "width": 200
                    },
                    "position": {
                        "x": 875.4268405019703,
                        "y": 448.6717155296055
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "generateNode"
                },
                {
                    "data": {
                        "form": {
                            "cite": true,
                            "frequencyPenaltyEnabled": true,
                            "frequency_penalty": 0.7,
                            "llm_id": "qwen2.5:7b@Ollama",
                            "maxTokensEnabled": false,
                            "max_tokens": 256,
                            "message_history_window_size": 12,
                            "parameters": [],
                            "presencePenaltyEnabled": true,
                            "presence_penalty": 0.4,
                            "prompt": "## 背景：你需要为一篇报告生成一个大纲，我会给你报告的题目和参考的大纲。\n\n## 目标：为指定标题的报告生成一个大纲，大纲可以照着参考大纲仿写\n\n## 约束：大纲的各个子标题之间使用换行符分割。直接回答文章大纲，不要说多余的话，不要告诉用户你使用了参考材料，也不可以将参考材料的内容输出给用户！！！\n\n## 输出样例：\n一、子章节1标题\n二、子章节2标题\n三、子章节3标题\n四、子章节4标题\n五、子章节5标题\n六、子章节6标题\n\n## 报告题目：\n{begin@topic}\n\n## 用户的其他指示：\n\n{begin@instruction}\n\n## 参考大纲：\n{Generate:BusyReadersWait}\n\n## 你提炼的大纲：",
                            "temperature": 0.1,
                            "temperatureEnabled": true,
                            "topPEnabled": true,
                            "top_p": 0.3
                        },
                        "label": "Generate",
                        "name": "生成大纲"
                    },
                    "dragging": false,
                    "id": "Generate:TastyYearsEnjoy",
                    "measured": {
                        "height": 108,
                        "width": 200
                    },
                    "position": {
                        "x": 1011.7530926636655,
                        "y": 187.93551283955424
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "generateNode"
                },
                {
                    "data": {
                        "form": {
                            "delimiter": "\n",
                            "query": [
                                {
                                    "component_id": "Generate:TastyYearsEnjoy",
                                    "type": "reference"
                                }
                            ]
                        },
                        "label": "Iteration",
                        "name": "生成报告内容"
                    },
                    "dragging": false,
                    "height": 420,
                    "id": "Iteration:AngryWormsRefuse",
                    "measured": {
                        "height": 420,
                        "width": 778
                    },
                    "position": {
                        "x": 1616.8673857099636,
                        "y": 180.19259743974578
                    },
                    "resizing": false,
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "group",
                    "width": 778
                },
                {
                    "data": {
                        "form": {},
                        "label": "IterationItem",
                        "name": "IterationItem"
                    },
                    "dragging": false,
                    "extent": "parent",
                    "id": "IterationItem:BitterPapersChew",
                    "measured": {
                        "height": 44,
                        "width": 44
                    },
                    "parentId": "Iteration:AngryWormsRefuse",
                    "position": {
                        "x": 49.73681749000798,
                        "y": 119.39500760991245
                    },
                    "selected": false,
                    "type": "iterationStartNode"
                },
                {
                    "data": {
                        "form": {
                            "cite": true,
                            "frequencyPenaltyEnabled": true,
                            "frequency_penalty": 0.7,
                            "llm_id": "qwen2.5:7b@Ollama",
                            "maxTokensEnabled": false,
                            "max_tokens": 256,
                            "message_history_window_size": 12,
                            "parameters": [],
                            "presencePenaltyEnabled": true,
                            "presence_penalty": 0.4,
                            "prompt": "## 背景：你需要根据给定的大纲某个章节撰写对应的报告。在撰写章节时，内容需要符合参考资料。\n\n## 目标：你需要创建一个详细的章节，在主题上需要遵循章节标题，在内容上需要严格贴合参考资料，章节内容中不要包含章节标题。\n\n## 约束：保持内容的准确性和相关性，避免偏离主题。仅回答扩写后的内容，不要说多余的话（这点十分重要！！！）。\n\n## 输出格式：只需要撰写的完整的章节文本，不需要再输出章节标题。\n\n## 注意事项：除了参考资料部分提到的数字、地点、人物、联系方式等具体信息，报告中不能涉及其他数字、地点、人物、联系方式等具体信息。\n\n## 用户的指示：\n{begin@instruction}\n\n \n## 文章标题：\n{begin@topic}\n\n## 章节标题：\n{IterationItem:BitterPapersChew}\n\n## 参考资料：\n{Retrieval:FunnyClubsCreate}\n\n## 扩写的章节内容：",
                            "temperature": 0.1,
                            "temperatureEnabled": true,
                            "topPEnabled": true,
                            "top_p": 0.3
                        },
                        "label": "Generate",
                        "name": "生成子报告内容"
                    },
                    "dragging": false,
                    "extent": "parent",
                    "id": "Generate:FlatHeadsRelax",
                    "measured": {
                        "height": 108,
                        "width": 200
                    },
                    "parentId": "Iteration:AngryWormsRefuse",
                    "position": {
                        "x": 675.1638291326306,
                        "y": 65.43446298561412
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "generateNode"
                },
                {
                    "data": {
                        "form": {
                            "empty_response": "无",
                            "kb_ids": [],
                            "keywords_similarity_weight": 0.3,
                            "query": [
                                {
                                    "component_id": "IterationItem:BitterPapersChew",
                                    "type": "reference"
                                }
                            ],
                            "similarity_threshold": 0.2,
                            "top_n": 8,
                            "use_kg": true
                        },
                        "label": "Retrieval",
                        "name": "知识检索"
                    },
                    "dragging": false,
                    "extent": "parent",
                    "id": "Retrieval:FunnyClubsCreate",
                    "measured": {
                        "height": 64,
                        "width": 200
                    },
                    "parentId": "Iteration:AngryWormsRefuse",
                    "position": {
                        "x": 415.78299307713496,
                        "y": 99.97113214413929
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "retrievalNode"
                },
                {
                    "data": {
                        "form": {
                            "content": "<h2> {IterationItem:BitterPapersChew}</h2>\n<div> {Generate:FlatHeadsRelax}</div>",
                            "parameters": []
                        },
                        "label": "Template",
                        "name": "模板转换_0"
                    },
                    "dragging": false,
                    "extent": "parent",
                    "id": "Template:RichSignsCheat",
                    "measured": {
                        "height": 76,
                        "width": 200
                    },
                    "parentId": "Iteration:AngryWormsRefuse",
                    "position": {
                        "x": 496.6763780063409,
                        "y": 274.0206256336736
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "templateNode"
                },
                {
                    "data": {
                        "form": {
                            "content": "<h1> {begin@topic}</h1>\n\n\n{Iteration:AngryWormsRefuse}",
                            "parameters": []
                        },
                        "label": "Template",
                        "name": "文章"
                    },
                    "dragging": false,
                    "id": "Template:FairBadgersTalk",
                    "measured": {
                        "height": 76,
                        "width": 200
                    },
                    "position": {
                        "x": 2241.548382345628,
                        "y": 333.03412041060534
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "templateNode"
                },
                {
                    "data": {
                        "form": {},
                        "label": "Answer",
                        "name": "输出"
                    },
                    "dragging": false,
                    "id": "Answer:LuckyBeersPoke",
                    "measured": {
                        "height": 44,
                        "width": 200
                    },
                    "position": {
                        "x": 2637.688293781408,
                        "y": 520.7648754217437
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "logicNode"
                }
            ],
            "edges": [
                {
                    "id": "xy-edge__Generate:BusyReadersWaitb-Generate:TastyYearsEnjoyc",
                    "markerEnd": "logo",
                    "source": "Generate:BusyReadersWait",
                    "sourceHandle": "b",
                    "style": {
                        "stroke": "rgb(202 197 245)",
                        "strokeWidth": 2
                    },
                    "target": "Generate:TastyYearsEnjoy",
                    "targetHandle": "c",
                    "type": "buttonEdge",
                    "zIndex": 1001
                },
                {
                    "id": "xy-edge__Retrieval:FunnyClubsCreateb-Generate:FlatHeadsRelaxc",
                    "markerEnd": "logo",
                    "source": "Retrieval:FunnyClubsCreate",
                    "sourceHandle": "b",
                    "style": {
                        "stroke": "rgb(202 197 245)",
                        "strokeWidth": 2
                    },
                    "target": "Generate:FlatHeadsRelax",
                    "targetHandle": "c",
                    "type": "buttonEdge",
                    "zIndex": 1001
                },
                {
                    "id": "xy-edge__Generate:FlatHeadsRelaxb-Template:RichSignsCheatb",
                    "markerEnd": "logo",
                    "source": "Generate:FlatHeadsRelax",
                    "sourceHandle": "b",
                    "style": {
                        "stroke": "rgb(202 197 245)",
                        "strokeWidth": 2
                    },
                    "target": "Template:RichSignsCheat",
                    "targetHandle": "b",
                    "type": "buttonEdge",
                    "zIndex": 1001
                },
                {
                    "id": "xy-edge__Iteration:AngryWormsRefuseb-Template:FairBadgersTalkc",
                    "markerEnd": "logo",
                    "source": "Iteration:AngryWormsRefuse",
                    "sourceHandle": "b",
                    "style": {
                        "stroke": "rgb(202 197 245)",
                        "strokeWidth": 2
                    },
                    "target": "Template:FairBadgersTalk",
                    "targetHandle": "c",
                    "type": "buttonEdge",
                    "zIndex": 1001
                },
                {
                    "id": "xy-edge__Template:FairBadgersTalkb-Answer:LuckyBeersPokec",
                    "markerEnd": "logo",
                    "source": "Template:FairBadgersTalk",
                    "sourceHandle": "b",
                    "style": {
                        "stroke": "rgb(202 197 245)",
                        "strokeWidth": 2
                    },
                    "target": "Answer:LuckyBeersPoke",
                    "targetHandle": "c",
                    "type": "buttonEdge",
                    "zIndex": 1001
                },
                {
                    "id": "xy-edge__Generate:TastyYearsEnjoyb-Iteration:AngryWormsRefusec",
                    "markerEnd": "logo",
                    "source": "Generate:TastyYearsEnjoy",
                    "sourceHandle": "b",
                    "style": {
                        "stroke": "rgb(202 197 245)",
                        "strokeWidth": 2
                    },
                    "target": "Iteration:AngryWormsRefuse",
                    "targetHandle": "c",
                    "type": "buttonEdge",
                    "zIndex": 1001
                },
                {
                    "id": "xy-edge__IterationItem:BitterPapersChew-Retrieval:FunnyClubsCreatec",
                    "markerEnd": "logo",
                    "source": "IterationItem:BitterPapersChew",
                    "style": {
                        "stroke": "rgb(202 197 245)",
                        "strokeWidth": 2
                    },
                    "target": "Retrieval:FunnyClubsCreate",
                    "targetHandle": "c",
                    "type": "buttonEdge",
                    "zIndex": 1001
                },
                {
                    "type": "buttonEdge",
                    "markerEnd": "logo",
                    "style": {
                        "strokeWidth": 2,
                        "stroke": "rgb(202 197 245)"
                    },
                    "zIndex": 1001,
                    "source": "begin",
                    "target": "Generate:BusyReadersWait",
                    "targetHandle": "c",
                    "id": "xy-edge__begin-Generate:BusyReadersWaitc"
                }
            ]
        },
        "history": [],
        "messages": [],
        "path": [],
        "reference": []
    }
}